library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.numeric_std.all;
entity progcount is
	port(
		input : in STD_LOGIC_VECTOR (15 downto 0);
		clk : in STD_LOGIC;
		pc_op : in  STD_LOGIC_VECTOR (1 downto 0);
		current_pc: buffer std_logic_vector( 15 downto 0);
		output : out STD_LOGIC_VECTOR (15 downto 0)
		);
end progcount;
architecture Behavioral of progcount is
begin
 process (clk, pc_op)
  begin
  
		if pc_op = "00" then
			output <= current_pc;  -- NOP, keep PC the same/halt
		  
		else if pc_op = "01" then   -- increment
			current_pc <= std_LOGIC_VECTOR(unsigned(current_pc) +1);
			
      else if pc_op = "10" then    -- set from external input
          current_pc <= input;
			 
      else if pc_op = "11" then   -- Reset
          current_pc <= b"0000000000000000";
	
output <= current_pc;
end if;
end if;
end if;
end if;
end process;
end Behavioral;
 